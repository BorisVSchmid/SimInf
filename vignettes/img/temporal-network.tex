%% -*- mode: LaTeX; coding: utf-8; -*-
\documentclass[tikz]{standalone}

\usepackage{tikz}
\usetikzlibrary{arrows,shapes}

\begin{document}

\tikzstyle{holding}=[draw,circle,orange!60, fill=orange!20, text=black, minimum size=4ex]
\tikzstyle{infected-holding}=[draw,rectangle, blue!60, fill=blue!20, text=black, minimum size=4ex]

\begin{tikzpicture}
  \sffamily

  \draw[>=stealth,->] (-1,-0.7) -- (9,-0.7);
  \node at (0,-0.9) {\tiny $t_n$};
  \draw (0,-.65) -- (0,-0.75);
  \node at (4,-0.9) {\tiny $t_{n+1}$};
  \draw (4,-.65) -- (4,-0.75);
  \node at (8,-0.9) {\tiny $t_{n+2}$};
  \draw (8,-.65) -- (8,-0.75);
  \node at (4,-1.2) {\tiny Time};

  \begin{scope}[name prefix = t0-]
    \draw[gray, rounded corners] (-1.5,-0.5) rectangle (1.5,2.5);
    \node[holding] (a) at (0,0) {a};
    \node[holding] (b) at (-1,1) {b};
    \node[holding] (c) at (0,2) {c};
    \node[infected-holding] (d) at (1,2) {d};
    \node[holding] (e) at (1,1) {e};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (a) -- (b)
      node[midway, right] {\footnotesize 2};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (a) -- (d)
      node[midway, left] {\footnotesize 9};
  \end{scope}

  \begin{scope}[name prefix = t1-]
    \draw[gray,rounded corners] (2.5,-0.5) rectangle (5.5,2.5);
    \node[holding] (a) at (4,0) {a};
    \node[holding] (b) at (3,1) {b};
    \node[holding] (c) at (4,2) {c};
    \node[infected-holding] (d) at (5,2) {d};
    \node[holding] (e) at (5,1) {e};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (c) -- (a)
      node[midway, left] {\footnotesize 4};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (c) -- (b)
      node[midway, right] {\footnotesize 5};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (c) -- (e)
      node[midway, left] {\footnotesize 7};
  \end{scope}

  \begin{scope}[name prefix = t2-]
    \draw[gray,rounded corners] (6.5,-0.5) rectangle (9.5,2.5);
    \node[holding] (a) at (8,0) {a};
    \node[holding] (b) at (7,1) {b};
    \node[holding] (c) at (8,2) {c};
    \node[infected-holding] (d) at (9,2) {d};
    \node[holding] (e) at (9,1) {e};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (d) -- (c)
      node[midway, above] {\footnotesize 3};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (c) -- (b)
      node[midway, right] {\footnotesize 1};
    \draw[>=stealth,shorten <=2pt, shorten >=2pt,->] (a) -- (e)
      node[midway, left] {\footnotesize 8};
  \end{scope}

\end{tikzpicture}

\end{document}
